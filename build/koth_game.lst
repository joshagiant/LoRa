ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"koth_game.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.resetGame,"ax",%progbits
  20              		.align	1
  21              		.global	resetGame
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	resetGame:
  27              	.LFB138:
  28              		.file 1 "Core/Src/koth_game.c"
   1:Core/Src/koth_game.c **** #include "main.h"
   2:Core/Src/koth_game.c **** #include <string.h>
   3:Core/Src/koth_game.c **** #include "define.h"
   4:Core/Src/koth_game.c **** #include "extern.h"
   5:Core/Src/koth_game.c **** #include <stdio.h>
   6:Core/Src/koth_game.c **** #include <stdlib.h>
   7:Core/Src/koth_game.c **** #include "cmsis_os.h"
   8:Core/Src/koth_game.c **** #include "lora.h"
   9:Core/Src/koth_game.c **** #include "ssd1306.h"
  10:Core/Src/koth_game.c **** 
  11:Core/Src/koth_game.c **** 
  12:Core/Src/koth_game.c **** void resetGame()
  13:Core/Src/koth_game.c **** {
  29              		.loc 1 13 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  14:Core/Src/koth_game.c ****     p1King_flag = 0;
  34              		.loc 1 14 5 view .LVU1
  35              		.loc 1 14 17 is_stmt 0 view .LVU2
  36 0000 0023     		movs	r3, #0
  37 0002 044A     		ldr	r2, .L2
  38 0004 1370     		strb	r3, [r2]
  15:Core/Src/koth_game.c ****     p2King_flag = 0;
  39              		.loc 1 15 5 is_stmt 1 view .LVU3
  40              		.loc 1 15 17 is_stmt 0 view .LVU4
  41 0006 044A     		ldr	r2, .L2+4
  42 0008 1370     		strb	r3, [r2]
  16:Core/Src/koth_game.c ****     p1King_counter = 0;
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 2


  43              		.loc 1 16 5 is_stmt 1 view .LVU5
  44              		.loc 1 16 20 is_stmt 0 view .LVU6
  45 000a 044A     		ldr	r2, .L2+8
  46 000c 1360     		str	r3, [r2]
  17:Core/Src/koth_game.c ****     p1King_counter = 0;
  47              		.loc 1 17 5 is_stmt 1 view .LVU7
  18:Core/Src/koth_game.c ****     gameState = waiting;
  48              		.loc 1 18 5 view .LVU8
  49              		.loc 1 18 15 is_stmt 0 view .LVU9
  50 000e 044A     		ldr	r2, .L2+12
  51 0010 1370     		strb	r3, [r2]
  19:Core/Src/koth_game.c **** 
  20:Core/Src/koth_game.c **** }
  52              		.loc 1 20 1 view .LVU10
  53 0012 7047     		bx	lr
  54              	.L3:
  55              		.align	2
  56              	.L2:
  57 0014 00000000 		.word	p1King_flag
  58 0018 00000000 		.word	p2King_flag
  59 001c 00000000 		.word	p1King_counter
  60 0020 00000000 		.word	gameState
  61              		.cfi_endproc
  62              	.LFE138:
  64              		.section	.rodata.sendOpcode.str1.4,"aMS",%progbits,1
  65              		.align	2
  66              	.LC0:
  67 0000 25754B4F 		.ascii	"%uKOTH\000"
  67      544800
  68              		.section	.text.sendOpcode,"ax",%progbits
  69              		.align	1
  70              		.global	sendOpcode
  71              		.syntax unified
  72              		.thumb
  73              		.thumb_func
  75              	sendOpcode:
  76              	.LVL0:
  77              	.LFB141:
  21:Core/Src/koth_game.c **** 
  22:Core/Src/koth_game.c **** void getKOTHPacket()
  23:Core/Src/koth_game.c **** {
  24:Core/Src/koth_game.c ****     // Wait for LoRa availability
  25:Core/Src/koth_game.c ****     //xSemaphoreTake(xloraMutex, portMAX_DELAY);
  26:Core/Src/koth_game.c **** 
  27:Core/Src/koth_game.c ****     // Get the packet
  28:Core/Src/koth_game.c ****     packet_size = LoRa_receive(&myLoRa, loraRXbuf, 10);
  29:Core/Src/koth_game.c **** 
  30:Core/Src/koth_game.c ****     if(packet_size > 0)
  31:Core/Src/koth_game.c ****     {
  32:Core/Src/koth_game.c ****         if(loraRXbuf[0] != receivedPacket[0])
  33:Core/Src/koth_game.c ****         {
  34:Core/Src/koth_game.c ****             memcpy(receivedPacket,loraRXbuf,10);
  35:Core/Src/koth_game.c ****         }
  36:Core/Src/koth_game.c ****     }
  37:Core/Src/koth_game.c ****     //xSemaphoreGive(xloraMutex);
  38:Core/Src/koth_game.c ****     
  39:Core/Src/koth_game.c ****     // Parse the data
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 3


  40:Core/Src/koth_game.c ****     if(strstr((char*)receivedPacket, "KOTH"))
  41:Core/Src/koth_game.c ****     {
  42:Core/Src/koth_game.c ****         long opcode;
  43:Core/Src/koth_game.c ****         char * trashCatcher[10]; 
  44:Core/Src/koth_game.c ****         
  45:Core/Src/koth_game.c ****         opcode = strtol((char*)receivedPacket, trashCatcher,10);
  46:Core/Src/koth_game.c **** 
  47:Core/Src/koth_game.c ****         // Process opcode and respond if necessary
  48:Core/Src/koth_game.c ****         switch (opcode)
  49:Core/Src/koth_game.c ****         {
  50:Core/Src/koth_game.c ****             case START:
  51:Core/Src/koth_game.c ****             // Reset and start
  52:Core/Src/koth_game.c ****             resetGame();
  53:Core/Src/koth_game.c ****             // Send confirmation
  54:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_START);
  55:Core/Src/koth_game.c ****             gameState = p2King;
  56:Core/Src/koth_game.c ****             P2LED_ON;
  57:Core/Src/koth_game.c ****             P1LED_OFF;
  58:Core/Src/koth_game.c ****             stateChange_flag = 1; 
  59:Core/Src/koth_game.c ****             p1King_flag = 0;
  60:Core/Src/koth_game.c ****             p2King_flag = 1;
  61:Core/Src/koth_game.c ****             break;
  62:Core/Src/koth_game.c **** 
  63:Core/Src/koth_game.c ****             case CLAIM_KING: 
  64:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_KING);
  65:Core/Src/koth_game.c ****             gameState = p2King;
  66:Core/Src/koth_game.c ****             P2LED_ON;
  67:Core/Src/koth_game.c ****             P1LED_OFF;
  68:Core/Src/koth_game.c ****             stateChange_flag = 1; 
  69:Core/Src/koth_game.c ****             p1King_flag = 1;
  70:Core/Src/koth_game.c ****             p2King_flag = 0;
  71:Core/Src/koth_game.c ****             break; 
  72:Core/Src/koth_game.c **** 
  73:Core/Src/koth_game.c ****             // Confirmations received
  74:Core/Src/koth_game.c ****             case CONFIRM_START:
  75:Core/Src/koth_game.c ****             case CONFIRM_KING:
  76:Core/Src/koth_game.c ****             gameState = p1King;
  77:Core/Src/koth_game.c ****             stateChange_flag = 1; 
  78:Core/Src/koth_game.c ****             P1LED_ON;
  79:Core/Src/koth_game.c ****             P2LED_OFF;
  80:Core/Src/koth_game.c ****             p1King_flag = 1;
  81:Core/Src/koth_game.c ****             p2King_flag = 0;
  82:Core/Src/koth_game.c ****             break;
  83:Core/Src/koth_game.c ****             
  84:Core/Src/koth_game.c ****             }
  85:Core/Src/koth_game.c ****         }
  86:Core/Src/koth_game.c ****         
  87:Core/Src/koth_game.c **** }
  88:Core/Src/koth_game.c **** 
  89:Core/Src/koth_game.c **** void btnPressed()
  90:Core/Src/koth_game.c **** {
  91:Core/Src/koth_game.c ****     switch (gameState)
  92:Core/Src/koth_game.c ****     {
  93:Core/Src/koth_game.c ****         case waiting:
  94:Core/Src/koth_game.c ****             // send message to opponent, wait on confirmation
  95:Core/Src/koth_game.c **** 
  96:Core/Src/koth_game.c ****             while(gameState == waiting)
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 4


  97:Core/Src/koth_game.c ****             { 
  98:Core/Src/koth_game.c ****                 ssd1306_SetCursor(0,0);
  99:Core/Src/koth_game.c ****                 ssd1306_WriteString("Syncing..",Font_16x24,1);
 100:Core/Src/koth_game.c ****                 ssd1306_UpdateScreen();
 101:Core/Src/koth_game.c ****                 sendOpcode(START);
 102:Core/Src/koth_game.c ****                 osDelay(100);
 103:Core/Src/koth_game.c ****             }
 104:Core/Src/koth_game.c ****         break;
 105:Core/Src/koth_game.c ****         
 106:Core/Src/koth_game.c ****         case p1King:
 107:Core/Src/koth_game.c ****             // oops! penalty
 108:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 109:Core/Src/koth_game.c ****             gameState = penalty;
 110:Core/Src/koth_game.c ****             P2LED_ON;
 111:Core/Src/koth_game.c ****             P1LED_OFF;
 112:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_KING);
 113:Core/Src/koth_game.c ****         break;
 114:Core/Src/koth_game.c **** 
 115:Core/Src/koth_game.c ****         case p2King:
 116:Core/Src/koth_game.c ****             // Take the hill
 117:Core/Src/koth_game.c ****             sendOpcode(CLAIM_KING);
 118:Core/Src/koth_game.c ****         break;
 119:Core/Src/koth_game.c **** 
 120:Core/Src/koth_game.c ****         case p1Winner:
 121:Core/Src/koth_game.c ****         case p2Winner:
 122:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 123:Core/Src/koth_game.c ****             gameState = waiting;
 124:Core/Src/koth_game.c ****             P1LED_OFF;
 125:Core/Src/koth_game.c ****             P2LED_OFF;
 126:Core/Src/koth_game.c ****         break;
 127:Core/Src/koth_game.c **** 
 128:Core/Src/koth_game.c ****         case penalty:
 129:Core/Src/koth_game.c ****             // nothing
 130:Core/Src/koth_game.c ****         break;
 131:Core/Src/koth_game.c ****     }
 132:Core/Src/koth_game.c **** 
 133:Core/Src/koth_game.c **** 
 134:Core/Src/koth_game.c **** }
 135:Core/Src/koth_game.c **** 
 136:Core/Src/koth_game.c **** void sendOpcode(uint8_t opcode)
 137:Core/Src/koth_game.c **** {
  78              		.loc 1 137 1 is_stmt 1 view -0
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 0
  81              		@ frame_needed = 0, uses_anonymous_args = 0
  82              		.loc 1 137 1 is_stmt 0 view .LVU12
  83 0000 10B5     		push	{r4, lr}
  84              	.LCFI0:
  85              		.cfi_def_cfa_offset 8
  86              		.cfi_offset 4, -8
  87              		.cfi_offset 14, -4
  88 0002 0246     		mov	r2, r0
 138:Core/Src/koth_game.c ****     memset(opcodeString, 0, sizeof(opcodeString));
  89              		.loc 1 138 5 is_stmt 1 view .LVU13
  90 0004 074C     		ldr	r4, .L6
  91 0006 0023     		movs	r3, #0
  92 0008 2360     		str	r3, [r4]	@ unaligned
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 5


  93 000a 6360     		str	r3, [r4, #4]	@ unaligned
  94 000c 2381     		strh	r3, [r4, #8]	@ unaligned
 139:Core/Src/koth_game.c ****     // Create encoded string
 140:Core/Src/koth_game.c ****     sprintf(opcodeString, "%uKOTH", opcode);
  95              		.loc 1 140 5 view .LVU14
  96 000e 0649     		ldr	r1, .L6+4
  97 0010 2046     		mov	r0, r4
  98              	.LVL1:
  99              		.loc 1 140 5 is_stmt 0 view .LVU15
 100 0012 FFF7FEFF 		bl	sprintf
 101              	.LVL2:
 141:Core/Src/koth_game.c **** 
 142:Core/Src/koth_game.c ****     // Wait for LoRa availability
 143:Core/Src/koth_game.c ****     //xSemaphoreTake(xloraMutex, portMAX_DELAY);
 144:Core/Src/koth_game.c **** 
 145:Core/Src/koth_game.c ****     // Send it via LoRa
 146:Core/Src/koth_game.c ****     LoRa_transmit(&myLoRa, (uint8_t*)opcodeString, 10, 100);
 102              		.loc 1 146 5 is_stmt 1 view .LVU16
 103 0016 6423     		movs	r3, #100
 104 0018 0A22     		movs	r2, #10
 105 001a 2146     		mov	r1, r4
 106 001c 0348     		ldr	r0, .L6+8
 107 001e FFF7FEFF 		bl	LoRa_transmit
 108              	.LVL3:
 147:Core/Src/koth_game.c ****     //if (res != LORA_OK) {
 148:Core/Src/koth_game.c ****     // Send failed
 149:Core/Src/koth_game.c ****     //debugBuddy = res;
 150:Core/Src/koth_game.c **** 
 151:Core/Src/koth_game.c ****    // }
 152:Core/Src/koth_game.c **** 
 153:Core/Src/koth_game.c ****     // Release LoRa availability
 154:Core/Src/koth_game.c ****     //xSemaphoreGive(xloraMutex);
 155:Core/Src/koth_game.c ****     // osMutexRelease(lora_mutexHandle);
 156:Core/Src/koth_game.c **** 
 157:Core/Src/koth_game.c ****   
 158:Core/Src/koth_game.c **** }...
 109              		.loc 1 158 1 is_stmt 0 view .LVU17
 110 0022 10BD     		pop	{r4, pc}
 111              	.L7:
 112              		.align	2
 113              	.L6:
 114 0024 00000000 		.word	opcodeString
 115 0028 00000000 		.word	.LC0
 116 002c 00000000 		.word	myLoRa
 117              		.cfi_endproc
 118              	.LFE141:
 120              		.section	.rodata.getKOTHPacket.str1.4,"aMS",%progbits,1
 121              		.align	2
 122              	.LC1:
 123 0000 4B4F5448 		.ascii	"KOTH\000"
 123      00
 124              		.section	.text.getKOTHPacket,"ax",%progbits
 125              		.align	1
 126              		.global	getKOTHPacket
 127              		.syntax unified
 128              		.thumb
 129              		.thumb_func
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 6


 131              	getKOTHPacket:
 132              	.LFB139:
  23:Core/Src/koth_game.c **** {
 133              		.loc 1 23 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 40
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137 0000 30B5     		push	{r4, r5, lr}
 138              	.LCFI1:
 139              		.cfi_def_cfa_offset 12
 140              		.cfi_offset 4, -12
 141              		.cfi_offset 5, -8
 142              		.cfi_offset 14, -4
 143 0002 8BB0     		sub	sp, sp, #44
 144              	.LCFI2:
 145              		.cfi_def_cfa_offset 56
  28:Core/Src/koth_game.c ****     packet_size = LoRa_receive(&myLoRa, loraRXbuf, 10);
 146              		.loc 1 28 5 view .LVU19
  28:Core/Src/koth_game.c ****     packet_size = LoRa_receive(&myLoRa, loraRXbuf, 10);
 147              		.loc 1 28 19 is_stmt 0 view .LVU20
 148 0004 0A22     		movs	r2, #10
 149 0006 3949     		ldr	r1, .L18
 150 0008 3948     		ldr	r0, .L18+4
 151 000a FFF7FEFF 		bl	LoRa_receive
 152              	.LVL4:
  28:Core/Src/koth_game.c ****     packet_size = LoRa_receive(&myLoRa, loraRXbuf, 10);
 153              		.loc 1 28 17 view .LVU21
 154 000e 394B     		ldr	r3, .L18+8
 155 0010 1870     		strb	r0, [r3]
  30:Core/Src/koth_game.c ****     if(packet_size > 0)
 156              		.loc 1 30 5 is_stmt 1 view .LVU22
  30:Core/Src/koth_game.c ****     if(packet_size > 0)
 157              		.loc 1 30 7 is_stmt 0 view .LVU23
 158 0012 68B1     		cbz	r0, .L9
  32:Core/Src/koth_game.c ****         if(loraRXbuf[0] != receivedPacket[0])
 159              		.loc 1 32 9 is_stmt 1 view .LVU24
  32:Core/Src/koth_game.c ****         if(loraRXbuf[0] != receivedPacket[0])
 160              		.loc 1 32 21 is_stmt 0 view .LVU25
 161 0014 354B     		ldr	r3, .L18
 162 0016 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
  32:Core/Src/koth_game.c ****         if(loraRXbuf[0] != receivedPacket[0])
 163              		.loc 1 32 42 view .LVU26
 164 0018 374B     		ldr	r3, .L18+12
 165 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  32:Core/Src/koth_game.c ****         if(loraRXbuf[0] != receivedPacket[0])
 166              		.loc 1 32 11 view .LVU27
 167 001c 9A42     		cmp	r2, r3
 168 001e 07D0     		beq	.L9
  34:Core/Src/koth_game.c ****             memcpy(receivedPacket,loraRXbuf,10);
 169              		.loc 1 34 13 is_stmt 1 view .LVU28
 170 0020 354B     		ldr	r3, .L18+12
 171 0022 324A     		ldr	r2, .L18
 172 0024 1068     		ldr	r0, [r2]	@ unaligned
 173 0026 5168     		ldr	r1, [r2, #4]	@ unaligned
 174 0028 1860     		str	r0, [r3]	@ unaligned
 175 002a 5960     		str	r1, [r3, #4]	@ unaligned
 176 002c 1289     		ldrh	r2, [r2, #8]	@ unaligned
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 7


 177 002e 1A81     		strh	r2, [r3, #8]	@ unaligned
 178              	.L9:
  40:Core/Src/koth_game.c ****     if(strstr((char*)receivedPacket, "KOTH"))
 179              		.loc 1 40 5 view .LVU29
  40:Core/Src/koth_game.c ****     if(strstr((char*)receivedPacket, "KOTH"))
 180              		.loc 1 40 8 is_stmt 0 view .LVU30
 181 0030 3249     		ldr	r1, .L18+16
 182 0032 3148     		ldr	r0, .L18+12
 183 0034 FFF7FEFF 		bl	strstr
 184              	.LVL5:
  40:Core/Src/koth_game.c ****     if(strstr((char*)receivedPacket, "KOTH"))
 185              		.loc 1 40 7 view .LVU31
 186 0038 28B3     		cbz	r0, .L8
 187              	.LBB2:
  42:Core/Src/koth_game.c ****         long opcode;
 188              		.loc 1 42 9 is_stmt 1 view .LVU32
  43:Core/Src/koth_game.c ****         char * trashCatcher[10]; 
 189              		.loc 1 43 9 view .LVU33
  45:Core/Src/koth_game.c ****         opcode = strtol((char*)receivedPacket, trashCatcher,10);
 190              		.loc 1 45 9 view .LVU34
  45:Core/Src/koth_game.c ****         opcode = strtol((char*)receivedPacket, trashCatcher,10);
 191              		.loc 1 45 18 is_stmt 0 view .LVU35
 192 003a 0A22     		movs	r2, #10
 193 003c 6946     		mov	r1, sp
 194 003e 2E48     		ldr	r0, .L18+12
 195 0040 FFF7FEFF 		bl	strtol
 196              	.LVL6:
  48:Core/Src/koth_game.c ****         switch (opcode)
 197              		.loc 1 48 9 is_stmt 1 view .LVU36
 198 0044 0328     		cmp	r0, #3
 199 0046 1ED8     		bhi	.L8
 200 0048 DFE800F0 		tbb	[pc, r0]
 201              	.L13:
 202 004c 02       		.byte	(.L15-.L13)/2
 203 004d 39       		.byte	(.L12-.L13)/2
 204 004e 1F       		.byte	(.L14-.L13)/2
 205 004f 39       		.byte	(.L12-.L13)/2
 206              		.p2align 1
 207              	.L15:
  52:Core/Src/koth_game.c ****             resetGame();
 208              		.loc 1 52 13 view .LVU37
 209 0050 FFF7FEFF 		bl	resetGame
 210              	.LVL7:
  54:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_START);
 211              		.loc 1 54 13 view .LVU38
 212 0054 0120     		movs	r0, #1
 213 0056 FFF7FEFF 		bl	sendOpcode
 214              	.LVL8:
  55:Core/Src/koth_game.c ****             gameState = p2King;
 215              		.loc 1 55 13 view .LVU39
  55:Core/Src/koth_game.c ****             gameState = p2King;
 216              		.loc 1 55 23 is_stmt 0 view .LVU40
 217 005a 0225     		movs	r5, #2
 218 005c 284B     		ldr	r3, .L18+20
 219 005e 1D70     		strb	r5, [r3]
  56:Core/Src/koth_game.c ****             P2LED_ON;
 220              		.loc 1 56 13 is_stmt 1 view .LVU41
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 8


 221 0060 284C     		ldr	r4, .L18+24
 222 0062 0022     		movs	r2, #0
 223 0064 0421     		movs	r1, #4
 224 0066 2046     		mov	r0, r4
 225 0068 FFF7FEFF 		bl	HAL_GPIO_WritePin
 226              	.LVL9:
  57:Core/Src/koth_game.c ****             P1LED_OFF;
 227              		.loc 1 57 13 view .LVU42
 228 006c 0122     		movs	r2, #1
 229 006e 2946     		mov	r1, r5
 230 0070 2046     		mov	r0, r4
 231 0072 FFF7FEFF 		bl	HAL_GPIO_WritePin
 232              	.LVL10:
  58:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 233              		.loc 1 58 13 view .LVU43
  58:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 234              		.loc 1 58 30 is_stmt 0 view .LVU44
 235 0076 0123     		movs	r3, #1
 236 0078 234A     		ldr	r2, .L18+28
 237 007a 1370     		strb	r3, [r2]
  59:Core/Src/koth_game.c ****             p1King_flag = 0;
 238              		.loc 1 59 13 is_stmt 1 view .LVU45
  59:Core/Src/koth_game.c ****             p1King_flag = 0;
 239              		.loc 1 59 25 is_stmt 0 view .LVU46
 240 007c 234A     		ldr	r2, .L18+32
 241 007e 0021     		movs	r1, #0
 242 0080 1170     		strb	r1, [r2]
  60:Core/Src/koth_game.c ****             p2King_flag = 1;
 243              		.loc 1 60 13 is_stmt 1 view .LVU47
  60:Core/Src/koth_game.c ****             p2King_flag = 1;
 244              		.loc 1 60 25 is_stmt 0 view .LVU48
 245 0082 234A     		ldr	r2, .L18+36
 246 0084 1370     		strb	r3, [r2]
  61:Core/Src/koth_game.c ****             break;
 247              		.loc 1 61 13 is_stmt 1 view .LVU49
 248              	.L8:
  61:Core/Src/koth_game.c ****             break;
 249              		.loc 1 61 13 is_stmt 0 view .LVU50
 250              	.LBE2:
  87:Core/Src/koth_game.c **** }
 251              		.loc 1 87 1 view .LVU51
 252 0086 0BB0     		add	sp, sp, #44
 253              	.LCFI3:
 254              		.cfi_remember_state
 255              		.cfi_def_cfa_offset 12
 256              		@ sp needed
 257 0088 30BD     		pop	{r4, r5, pc}
 258              	.LVL11:
 259              	.L14:
 260              	.LCFI4:
 261              		.cfi_restore_state
 262              	.LBB3:
  64:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_KING);
 263              		.loc 1 64 13 is_stmt 1 view .LVU52
 264 008a 0320     		movs	r0, #3
 265              	.LVL12:
  64:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_KING);
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 9


 266              		.loc 1 64 13 is_stmt 0 view .LVU53
 267 008c FFF7FEFF 		bl	sendOpcode
 268              	.LVL13:
  65:Core/Src/koth_game.c ****             gameState = p2King;
 269              		.loc 1 65 13 is_stmt 1 view .LVU54
  65:Core/Src/koth_game.c ****             gameState = p2King;
 270              		.loc 1 65 23 is_stmt 0 view .LVU55
 271 0090 0225     		movs	r5, #2
 272 0092 1B4B     		ldr	r3, .L18+20
 273 0094 1D70     		strb	r5, [r3]
  66:Core/Src/koth_game.c ****             P2LED_ON;
 274              		.loc 1 66 13 is_stmt 1 view .LVU56
 275 0096 1B4C     		ldr	r4, .L18+24
 276 0098 0022     		movs	r2, #0
 277 009a 0421     		movs	r1, #4
 278 009c 2046     		mov	r0, r4
 279 009e FFF7FEFF 		bl	HAL_GPIO_WritePin
 280              	.LVL14:
  67:Core/Src/koth_game.c ****             P1LED_OFF;
 281              		.loc 1 67 13 view .LVU57
 282 00a2 0122     		movs	r2, #1
 283 00a4 2946     		mov	r1, r5
 284 00a6 2046     		mov	r0, r4
 285 00a8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 286              	.LVL15:
  68:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 287              		.loc 1 68 13 view .LVU58
  68:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 288              		.loc 1 68 30 is_stmt 0 view .LVU59
 289 00ac 0123     		movs	r3, #1
 290 00ae 164A     		ldr	r2, .L18+28
 291 00b0 1370     		strb	r3, [r2]
  69:Core/Src/koth_game.c ****             p1King_flag = 1;
 292              		.loc 1 69 13 is_stmt 1 view .LVU60
  69:Core/Src/koth_game.c ****             p1King_flag = 1;
 293              		.loc 1 69 25 is_stmt 0 view .LVU61
 294 00b2 164A     		ldr	r2, .L18+32
 295 00b4 1370     		strb	r3, [r2]
  70:Core/Src/koth_game.c ****             p2King_flag = 0;
 296              		.loc 1 70 13 is_stmt 1 view .LVU62
  70:Core/Src/koth_game.c ****             p2King_flag = 0;
 297              		.loc 1 70 25 is_stmt 0 view .LVU63
 298 00b6 164B     		ldr	r3, .L18+36
 299 00b8 0022     		movs	r2, #0
 300 00ba 1A70     		strb	r2, [r3]
  71:Core/Src/koth_game.c ****             break; 
 301              		.loc 1 71 13 is_stmt 1 view .LVU64
 302 00bc E3E7     		b	.L8
 303              	.LVL16:
 304              	.L12:
  76:Core/Src/koth_game.c ****             gameState = p1King;
 305              		.loc 1 76 13 view .LVU65
  76:Core/Src/koth_game.c ****             gameState = p1King;
 306              		.loc 1 76 23 is_stmt 0 view .LVU66
 307 00be 0124     		movs	r4, #1
 308 00c0 0F4B     		ldr	r3, .L18+20
 309 00c2 1C70     		strb	r4, [r3]
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 10


  77:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 310              		.loc 1 77 13 is_stmt 1 view .LVU67
  77:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 311              		.loc 1 77 30 is_stmt 0 view .LVU68
 312 00c4 104B     		ldr	r3, .L18+28
 313 00c6 1C70     		strb	r4, [r3]
  78:Core/Src/koth_game.c ****             P1LED_ON;
 314              		.loc 1 78 13 is_stmt 1 view .LVU69
 315 00c8 0E4D     		ldr	r5, .L18+24
 316 00ca 0022     		movs	r2, #0
 317 00cc 0221     		movs	r1, #2
 318 00ce 2846     		mov	r0, r5
 319              	.LVL17:
  78:Core/Src/koth_game.c ****             P1LED_ON;
 320              		.loc 1 78 13 is_stmt 0 view .LVU70
 321 00d0 FFF7FEFF 		bl	HAL_GPIO_WritePin
 322              	.LVL18:
  79:Core/Src/koth_game.c ****             P2LED_OFF;
 323              		.loc 1 79 13 is_stmt 1 view .LVU71
 324 00d4 2246     		mov	r2, r4
 325 00d6 0421     		movs	r1, #4
 326 00d8 2846     		mov	r0, r5
 327 00da FFF7FEFF 		bl	HAL_GPIO_WritePin
 328              	.LVL19:
  80:Core/Src/koth_game.c ****             p1King_flag = 1;
 329              		.loc 1 80 13 view .LVU72
  80:Core/Src/koth_game.c ****             p1King_flag = 1;
 330              		.loc 1 80 25 is_stmt 0 view .LVU73
 331 00de 0B4B     		ldr	r3, .L18+32
 332 00e0 1C70     		strb	r4, [r3]
  81:Core/Src/koth_game.c ****             p2King_flag = 0;
 333              		.loc 1 81 13 is_stmt 1 view .LVU74
  81:Core/Src/koth_game.c ****             p2King_flag = 0;
 334              		.loc 1 81 25 is_stmt 0 view .LVU75
 335 00e2 0B4B     		ldr	r3, .L18+36
 336 00e4 0022     		movs	r2, #0
 337 00e6 1A70     		strb	r2, [r3]
  82:Core/Src/koth_game.c ****             break;
 338              		.loc 1 82 13 is_stmt 1 view .LVU76
 339              	.LBE3:
  87:Core/Src/koth_game.c **** }
 340              		.loc 1 87 1 is_stmt 0 view .LVU77
 341 00e8 CDE7     		b	.L8
 342              	.L19:
 343 00ea 00BF     		.align	2
 344              	.L18:
 345 00ec 00000000 		.word	loraRXbuf
 346 00f0 00000000 		.word	myLoRa
 347 00f4 00000000 		.word	packet_size
 348 00f8 00000000 		.word	receivedPacket
 349 00fc 00000000 		.word	.LC1
 350 0100 00000000 		.word	gameState
 351 0104 00040240 		.word	1073873920
 352 0108 00000000 		.word	stateChange_flag
 353 010c 00000000 		.word	p1King_flag
 354 0110 00000000 		.word	p2King_flag
 355              		.cfi_endproc
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 11


 356              	.LFE139:
 358              		.section	.rodata.btnPressed.str1.4,"aMS",%progbits,1
 359              		.align	2
 360              	.LC2:
 361 0000 53796E63 		.ascii	"Syncing..\000"
 361      696E672E 
 361      2E00
 362              		.section	.text.btnPressed,"ax",%progbits
 363              		.align	1
 364              		.global	btnPressed
 365              		.syntax unified
 366              		.thumb
 367              		.thumb_func
 369              	btnPressed:
 370              	.LFB140:
  90:Core/Src/koth_game.c **** {
 371              		.loc 1 90 1 is_stmt 1 view -0
 372              		.cfi_startproc
 373              		@ args = 0, pretend = 0, frame = 0
 374              		@ frame_needed = 0, uses_anonymous_args = 0
 375 0000 38B5     		push	{r3, r4, r5, lr}
 376              	.LCFI5:
 377              		.cfi_def_cfa_offset 16
 378              		.cfi_offset 3, -16
 379              		.cfi_offset 4, -12
 380              		.cfi_offset 5, -8
 381              		.cfi_offset 14, -4
  91:Core/Src/koth_game.c ****     switch (gameState)
 382              		.loc 1 91 5 view .LVU79
 383 0002 254B     		ldr	r3, .L31
 384 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 385 0006 042B     		cmp	r3, #4
 386 0008 1AD8     		bhi	.L20
 387 000a DFE803F0 		tbb	[pc, r3]
 388              	.L23:
 389 000e 15       		.byte	(.L26-.L23)/2
 390 000f 1A       		.byte	(.L25-.L23)/2
 391 0010 2F       		.byte	(.L24-.L23)/2
 392 0011 33       		.byte	(.L22-.L23)/2
 393 0012 33       		.byte	(.L22-.L23)/2
 394 0013 00       		.p2align 1
 395              	.L27:
  98:Core/Src/koth_game.c ****                 ssd1306_SetCursor(0,0);
 396              		.loc 1 98 17 view .LVU80
 397 0014 0021     		movs	r1, #0
 398 0016 0846     		mov	r0, r1
 399 0018 FFF7FEFF 		bl	ssd1306_SetCursor
 400              	.LVL20:
  99:Core/Src/koth_game.c ****                 ssd1306_WriteString("Syncing..",Font_16x24,1);
 401              		.loc 1 99 17 view .LVU81
 402 001c 1F4A     		ldr	r2, .L31+4
 403 001e 0123     		movs	r3, #1
 404 0020 06CA     		ldm	r2, {r1, r2}
 405 0022 1F48     		ldr	r0, .L31+8
 406 0024 FFF7FEFF 		bl	ssd1306_WriteString
 407              	.LVL21:
 100:Core/Src/koth_game.c ****                 ssd1306_UpdateScreen();
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 12


 408              		.loc 1 100 17 view .LVU82
 409 0028 FFF7FEFF 		bl	ssd1306_UpdateScreen
 410              	.LVL22:
 101:Core/Src/koth_game.c ****                 sendOpcode(START);
 411              		.loc 1 101 17 view .LVU83
 412 002c 0020     		movs	r0, #0
 413 002e FFF7FEFF 		bl	sendOpcode
 414              	.LVL23:
 102:Core/Src/koth_game.c ****                 osDelay(100);
 415              		.loc 1 102 17 view .LVU84
 416 0032 6420     		movs	r0, #100
 417 0034 FFF7FEFF 		bl	osDelay
 418              	.LVL24:
 419              	.L26:
  96:Core/Src/koth_game.c ****             while(gameState == waiting)
 420              		.loc 1 96 29 view .LVU85
 421 0038 174B     		ldr	r3, .L31
 422 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 423 003c 002B     		cmp	r3, #0
 424 003e E9D0     		beq	.L27
 425              	.L20:
 134:Core/Src/koth_game.c **** }
 426              		.loc 1 134 1 is_stmt 0 view .LVU86
 427 0040 38BD     		pop	{r3, r4, r5, pc}
 428              	.L25:
 108:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 429              		.loc 1 108 13 is_stmt 1 view .LVU87
 108:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 430              		.loc 1 108 30 is_stmt 0 view .LVU88
 431 0042 0125     		movs	r5, #1
 432 0044 174B     		ldr	r3, .L31+12
 433 0046 1D70     		strb	r5, [r3]
 109:Core/Src/koth_game.c ****             gameState = penalty;
 434              		.loc 1 109 13 is_stmt 1 view .LVU89
 109:Core/Src/koth_game.c ****             gameState = penalty;
 435              		.loc 1 109 23 is_stmt 0 view .LVU90
 436 0048 134B     		ldr	r3, .L31
 437 004a 0522     		movs	r2, #5
 438 004c 1A70     		strb	r2, [r3]
 110:Core/Src/koth_game.c ****             P2LED_ON;
 439              		.loc 1 110 13 is_stmt 1 view .LVU91
 440 004e 164C     		ldr	r4, .L31+16
 441 0050 0022     		movs	r2, #0
 442 0052 0421     		movs	r1, #4
 443 0054 2046     		mov	r0, r4
 444 0056 FFF7FEFF 		bl	HAL_GPIO_WritePin
 445              	.LVL25:
 111:Core/Src/koth_game.c ****             P1LED_OFF;
 446              		.loc 1 111 13 view .LVU92
 447 005a 2A46     		mov	r2, r5
 448 005c 0221     		movs	r1, #2
 449 005e 2046     		mov	r0, r4
 450 0060 FFF7FEFF 		bl	HAL_GPIO_WritePin
 451              	.LVL26:
 112:Core/Src/koth_game.c ****             sendOpcode(CONFIRM_KING);
 452              		.loc 1 112 13 view .LVU93
 453 0064 0320     		movs	r0, #3
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 13


 454 0066 FFF7FEFF 		bl	sendOpcode
 455              	.LVL27:
 113:Core/Src/koth_game.c ****         break;
 456              		.loc 1 113 9 view .LVU94
 457 006a E9E7     		b	.L20
 458              	.L24:
 117:Core/Src/koth_game.c ****             sendOpcode(CLAIM_KING);
 459              		.loc 1 117 13 view .LVU95
 460 006c 0220     		movs	r0, #2
 461 006e FFF7FEFF 		bl	sendOpcode
 462              	.LVL28:
 118:Core/Src/koth_game.c ****         break;
 463              		.loc 1 118 9 view .LVU96
 464 0072 E5E7     		b	.L20
 465              	.L22:
 122:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 466              		.loc 1 122 13 view .LVU97
 122:Core/Src/koth_game.c ****             stateChange_flag = 1; 
 467              		.loc 1 122 30 is_stmt 0 view .LVU98
 468 0074 0124     		movs	r4, #1
 469 0076 0B4B     		ldr	r3, .L31+12
 470 0078 1C70     		strb	r4, [r3]
 123:Core/Src/koth_game.c ****             gameState = waiting;
 471              		.loc 1 123 13 is_stmt 1 view .LVU99
 123:Core/Src/koth_game.c ****             gameState = waiting;
 472              		.loc 1 123 23 is_stmt 0 view .LVU100
 473 007a 074B     		ldr	r3, .L31
 474 007c 0022     		movs	r2, #0
 475 007e 1A70     		strb	r2, [r3]
 124:Core/Src/koth_game.c ****             P1LED_OFF;
 476              		.loc 1 124 13 is_stmt 1 view .LVU101
 477 0080 094D     		ldr	r5, .L31+16
 478 0082 2246     		mov	r2, r4
 479 0084 0221     		movs	r1, #2
 480 0086 2846     		mov	r0, r5
 481 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 482              	.LVL29:
 125:Core/Src/koth_game.c ****             P2LED_OFF;
 483              		.loc 1 125 13 view .LVU102
 484 008c 2246     		mov	r2, r4
 485 008e 0421     		movs	r1, #4
 486 0090 2846     		mov	r0, r5
 487 0092 FFF7FEFF 		bl	HAL_GPIO_WritePin
 488              	.LVL30:
 126:Core/Src/koth_game.c ****         break;
 489              		.loc 1 126 9 view .LVU103
 134:Core/Src/koth_game.c **** }
 490              		.loc 1 134 1 is_stmt 0 view .LVU104
 491 0096 D3E7     		b	.L20
 492              	.L32:
 493              		.align	2
 494              	.L31:
 495 0098 00000000 		.word	gameState
 496 009c 00000000 		.word	Font_16x24
 497 00a0 00000000 		.word	.LC2
 498 00a4 00000000 		.word	stateChange_flag
 499 00a8 00040240 		.word	1073873920
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 14


 500              		.cfi_endproc
 501              	.LFE140:
 503              		.text
 504              	.Letext0:
 505              		.file 2 "c:\\libraries\\gcc\\11.2 2022.02\\arm-none-eabi\\include\\machine\\_default_types.h"
 506              		.file 3 "c:\\libraries\\gcc\\11.2 2022.02\\arm-none-eabi\\include\\sys\\_stdint.h"
 507              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 508              		.file 5 "c:\\libraries\\gcc\\11.2 2022.02\\lib\\gcc\\arm-none-eabi\\11.2.1\\include\\stddef.h"
 509              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 510              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 511              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 512              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 513              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 514              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 515              		.file 12 "Core/Inc/lora.h"
 516              		.file 13 "Core/Inc/extern.h"
 517              		.file 14 "Core/Inc/ssd1306_fonts.h"
 518              		.file 15 "Core/Inc/ssd1306.h"
 519              		.file 16 "c:\\libraries\\gcc\\11.2 2022.02\\arm-none-eabi\\include\\stdio.h"
 520              		.file 17 "c:\\libraries\\gcc\\11.2 2022.02\\arm-none-eabi\\include\\string.h"
 521              		.file 18 "c:\\libraries\\gcc\\11.2 2022.02\\arm-none-eabi\\include\\stdlib.h"
ARM GAS  C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 koth_game.c
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:20     .text.resetGame:00000000 $t
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:26     .text.resetGame:00000000 resetGame
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:57     .text.resetGame:00000014 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:65     .rodata.sendOpcode.str1.4:00000000 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:69     .text.sendOpcode:00000000 $t
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:75     .text.sendOpcode:00000000 sendOpcode
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:114    .text.sendOpcode:00000024 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:121    .rodata.getKOTHPacket.str1.4:00000000 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:125    .text.getKOTHPacket:00000000 $t
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:131    .text.getKOTHPacket:00000000 getKOTHPacket
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:202    .text.getKOTHPacket:0000004c $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:206    .text.getKOTHPacket:00000050 $t
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:345    .text.getKOTHPacket:000000ec $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:359    .rodata.btnPressed.str1.4:00000000 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:363    .text.btnPressed:00000000 $t
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:369    .text.btnPressed:00000000 btnPressed
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:389    .text.btnPressed:0000000e $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:495    .text.btnPressed:00000098 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:394    .text.btnPressed:00000013 $d
C:\Users\jdcox\AppData\Local\Temp\ccFSkBXJ.s:394    .text.btnPressed:00000014 $t

UNDEFINED SYMBOLS
p1King_flag
p2King_flag
p1King_counter
gameState
sprintf
LoRa_transmit
opcodeString
myLoRa
LoRa_receive
strstr
strtol
HAL_GPIO_WritePin
loraRXbuf
packet_size
receivedPacket
stateChange_flag
ssd1306_SetCursor
ssd1306_WriteString
ssd1306_UpdateScreen
osDelay
Font_16x24
